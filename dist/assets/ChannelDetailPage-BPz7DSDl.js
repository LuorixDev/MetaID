import{d as E,f as r,g as C,r as b,h as w,i as _,c as f,a,j as D,e as M,t as S,b as m,w as q,v as P,k as V,u as A,n as B,o as h,_ as N}from"./index-DEv2NLfG.js";const R={class:"page",id:"channel-detail"},H={class:"app-header",style:{"padding-bottom":"16px"}},I={class:"header-top"},j={class:"app-title",style:{"font-size":"20px"}},K={id:"channelDetailTitle"},U={class:"app-content",style:{"padding-top":"0"}},$={key:0,class:"message-input-area"},z=500,F=E({__name:"ChannelDetailPage",setup(G){const u=C(),y=A(),T=r(()=>u.query.title||"频道/聊天名称"),c=r(()=>u.query.type||"chat"),x=r(()=>c.value==="personal"||c.value==="chat"||c.value==="group"),v=b(""),d=b(null),k=()=>{y.push({name:"Channel"})},p=()=>{const e=v.value.trim();if(e){const s='\n      <div class="message-item sent">\n        <div class="message-bubble">\n          <div class="message-text">'.concat(e,'</div>\n          <div class="message-meta">\n            <span class="message-time">刚刚</span>\n            <span class="message-views"><i class="fas fa-eye"></i> 0</span>\n            <span class="message-comments"><i class="fas fa-comment"></i> 0</span>\n          </div>\n        </div>\n        <div class="message-avatar">张</div>\n      </div>\n    ');d.value&&(d.value.innerHTML+=s,v.value="",B(()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)}),g())}};let t=null;const g=()=>{document.querySelectorAll(".message-item").forEach(e=>{e.removeEventListener("touchstart",i),e.removeEventListener("touchend",l),e.removeEventListener("click",o)}),document.querySelectorAll(".message-item").forEach(e=>{e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchend",l),e.addEventListener("click",o)})},i=(e,s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{L(e.target,s)},z)},l=()=>{t!==null&&clearTimeout(t)},o=e=>{t!==null&&setTimeout(()=>{t=null},50)},L=(e,s)=>{alert("长按消息 (".concat(s,")，模拟添加表情回复！")),t=null};return w(()=>{g()}),_(()=>{document.querySelectorAll(".message-item").forEach(e=>{e.removeEventListener("touchstart",i),e.removeEventListener("touchend",l),e.removeEventListener("click",o)}),t!==null&&clearTimeout(t)}),(e,s)=>(h(),f("div",R,[a("div",H,[a("div",I,[a("div",{class:"btn-more",onClick:k},s[4]||(s[4]=[a("i",{class:"fas fa-arrow-left"},null,-1),M(" 返回")])),a("div",j,[a("span",K,S(T.value),1)]),s[5]||(s[5]=a("div",{class:"btn-more"},"详情",-1))])]),a("div",U,[a("div",{class:"message-list",ref_key:"messageListRef",ref:d},[a("div",{class:"message-item received",onTouchstart:s[0]||(s[0]=n=>i(n,"received")),onTouchend:l,onClick:o},s[6]||(s[6]=[m('<div class="message-avatar" data-v-1768b1ad>王</div><div class="message-bubble" data-v-1768b1ad><div class="message-sender" data-v-1768b1ad>王设计师</div><div class="message-text" data-v-1768b1ad> 刚刚更新了我的设计作品集，欢迎大家来交流反馈！ </div><div class="message-meta" data-v-1768b1ad><span class="message-time" data-v-1768b1ad>2小时前</span><span class="message-views" data-v-1768b1ad><i class="fas fa-eye" data-v-1768b1ad></i> 88</span><span class="message-comments" data-v-1768b1ad><i class="fas fa-comment" data-v-1768b1ad></i> 5</span></div></div>',2)]),32),a("div",{class:"message-item sent",onTouchstart:s[1]||(s[1]=n=>i(n,"sent")),onTouchend:l,onClick:o},s[7]||(s[7]=[m('<div class="message-bubble" data-v-1768b1ad><div class="message-text" data-v-1768b1ad> 这是我的第一条频道广播！欢迎大家关注我的动态。 </div><div class="message-meta" data-v-1768b1ad><span class="message-time" data-v-1768b1ad>刚刚</span><span class="message-views" data-v-1768b1ad><i class="fas fa-eye" data-v-1768b1ad></i> 150</span><span class="message-comments" data-v-1768b1ad><i class="fas fa-comment" data-v-1768b1ad></i> 0</span></div></div><div class="message-avatar" data-v-1768b1ad>张</div>',2)]),32),a("div",{class:"message-item received",onTouchstart:s[2]||(s[2]=n=>i(n,"received")),onTouchend:l,onClick:o},s[8]||(s[8]=[m('<div class="message-avatar" data-v-1768b1ad><i class="fas fa-users" data-v-1768b1ad></i></div><div class="message-bubble" data-v-1768b1ad><div class="message-sender" data-v-1768b1ad>产品设计小会</div><div class="message-image" style="width:200px;height:150px;background:var(--light);border-radius:8px;margin-bottom:8px;display:flex;align-items:center;justify-content:center;color:var(--gray);" data-v-1768b1ad><i class="fas fa-image" data-v-1768b1ad></i> 方案初稿 </div><div class="message-meta" data-v-1768b1ad><span class="message-time" data-v-1768b1ad>3小时前</span><span class="message-comments" data-v-1768b1ad><i class="fas fa-comment" data-v-1768b1ad></i> 12</span></div></div>',2)]),32)],512)]),x.value?(h(),f("div",$,[q(a("input",{type:"text",placeholder:"输入消息...","onUpdate:modelValue":s[3]||(s[3]=n=>v.value=n),onKeyup:V(p,["enter"])},null,544),[[P,v.value]]),a("button",{class:"btn-primary",onClick:p},s[9]||(s[9]=[a("i",{class:"fas fa-paper-plane"},null,-1)]))])):D("",!0)]))}}),O=N(F,[["__scopeId","data-v-1768b1ad"]]);export{O as default};
